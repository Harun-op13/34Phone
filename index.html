<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">34 PHONE BBA - Premium Tech Store</title>
    <link rel="icon" type="image/jpeg" href="./assets/logo-v2.jpg">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Cairo:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        arabic: ['Cairo', 'sans-serif'],
                    },
                    colors: {
                        primary: '#3b82f6', // blue-500
                        secondary: '#8b5cf6', // violet-500
                        accent: '#f59e0b', // amber-500
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .glass {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .gradient-text {
            background: linear-gradient(to right, #60a5fa, #c084fc);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card-hovering {
            transition: all 0.3s ease;
        }

        .card-hovering:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 40px -10px rgba(59, 130, 246, 0.15);
        }

        .animated-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -50;
            overflow: hidden;
        }

        .bg-image {
            position: absolute;
            top: -5%;
            left: -5%;
            width: 110%;
            height: 110%;
            background-image: url('./assets/bg.jpg');
            background-size: cover;
            background-position: center;
            filter: blur(15px) brightness(0.6);
            animation: slow-pan 30s ease-in-out infinite alternate;
        }

        .bg-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(45deg,
                    rgba(255, 255, 255, 0.03) 0px,
                    rgba(255, 255, 255, 0.03) 1px,
                    transparent 1px,
                    transparent 10px);
            background-size: 20px 20px;
            animation: move-lines 20s linear infinite;
        }

        @keyframes slow-pan {
            0% {
                transform: scale(1) translate(0, 0);
            }

            100% {
                transform: scale(1.1) translate(-2%, -2%);
            }
        }

        @keyframes move-lines {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 50px 50px;
            }
        }

        /* Filter Styles */
        .filter-shadow {
            box-shadow: 0 0 50px -10px rgba(59, 130, 246, 0.1);
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .filter-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 100 !important;
            transform: translateY(100%);
            border-radius: 2rem 2rem 0 0;
            max-height: 85vh;
            overflow-y: auto;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: #0f172a;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .filter-panel.open {
            transform: translateY(0);
            box-shadow: 0 -20px 50px rgba(0, 0, 0, 0.8);
        }

        @media (min-width: 1024px) {
            .filter-panel {
                top: 0;
                right: 0;
                left: auto;
                bottom: 0;
                width: 400px;
                height: 100vh;
                max-height: none;
                transform: translateX(100%);
                border-radius: 0;
                border-top: 0;
                border-left: 1px solid rgba(255, 255, 255, 0.1);
            }

            .filter-panel.open {
                transform: translateX(0);
            }
        }

        /* Filter Checkbox Effect */
        .checkbox-inner.active {
            background-color: #3b82f6;
            border-color: #3b82f6;
        }

        .checkbox-inner.active::after {
            content: '';
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 1px;
        }

        /* Rarity Tag Animation */
        @keyframes rarity-slide {
            0% {
                transform: translateY(10px);
                opacity: 0;
            }

            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .rarity-tag {
            animation: rarity-slide 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        .pulse-text {
            animation: pulse-op 2s infinite;
        }

        @keyframes pulse-op {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }
    </style>
    <style id="intro-styles">
        /* Intro Display State */
        body.intro-active {
            overflow: hidden;
        }

        #intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #1a0b2e;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
            transition: opacity 0.8s ease-in-out, transform 0.8s ease-in-out;
        }

        #intro-overlay.fade-out {
            opacity: 0;
            transform: translateY(-20px);
            pointer-events: none;
        }

        /* Background Reconstruction */
        #intro-overlay .bg-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            overflow: hidden;
        }

        #intro-overlay .bg-glow-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150vw;
            height: 150vw;
            background: radial-gradient(circle, rgba(147, 51, 234, 0.3) 0%, rgba(88, 28, 135, 0.1) 40%, rgba(15, 5, 24, 0.95) 80%);
            z-index: 1;
        }

        #intro-overlay .shard {
            position: absolute;
            background: linear-gradient(to bottom, rgba(168, 85, 247, 0) 0%, rgba(168, 85, 247, 0.15) 100%);
            transform-origin: bottom center;
            bottom: 50%;
            left: 50%;
            width: 200px;
            height: 300px;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            filter: blur(8px);
            z-index: 2;
            opacity: 0;
            animation: shardAppear 2s ease-out forwards;
        }

        /* Unique classes for shards */
        #intro-overlay .s1 {
            transform: translateX(-50%) rotate(0deg) translateY(-100px);
            height: 80vh;
            width: 100px;
            animation-delay: 0.1s;
        }

        #intro-overlay .s2 {
            transform: translateX(-50%) rotate(45deg) translateY(-80px);
            height: 60vh;
            width: 150px;
            animation-delay: 0.2s;
        }

        #intro-overlay .s3 {
            transform: translateX(-50%) rotate(-45deg) translateY(-80px);
            height: 60vh;
            width: 150px;
            animation-delay: 0.3s;
        }

        #intro-overlay .s4 {
            transform: translateX(-50%) rotate(90deg) translateY(-50px);
            height: 50vh;
            width: 80px;
            animation-delay: 0.4s;
        }

        #intro-overlay .s5 {
            transform: translateX(-50%) rotate(-90deg) translateY(-50px);
            height: 50vh;
            width: 80px;
            animation-delay: 0.4s;
        }

        #intro-overlay .s6 {
            width: 400px;
            height: 120vh;
            background: linear-gradient(90deg, transparent, rgba(192, 132, 252, 0.08), transparent);
            transform: translate(-50%, 50%) rotate(-35deg);
            bottom: auto;
            top: -20%;
            clip-path: none;
            filter: blur(20px);
            animation: streakSlow 4s ease-in-out infinite alternate;
        }

        #intro-overlay .particles-container {
            position: absolute;
            inset: 0;
            z-index: 3;
        }

        #intro-overlay .intro-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #d8b4fe;
            border-radius: 50%;
            box-shadow: 0 0 10px #a855f7;
            opacity: 0;
        }

        #intro-overlay .content-wrapper {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #intro-overlay .logo-visual {
            width: 400px;
            max-width: 90vw;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(168, 85, 247, 0.3);
            opacity: 0;
            transform: scale(0.8) translateY(20px);
            transition: all 0.5s ease;
        }

        #intro-overlay .animate-logo {
            animation: logoEntrance 3s cubic-bezier(0.2, 0.8, 0.2, 1) forwards 0.5s;
        }

        #intro-overlay .text-welcome {
            margin-top: 2rem;
            color: white;
            font-size: 1.5rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            font-weight: 300;
            opacity: 0;
            transform: translateY(10px);
            text-shadow: 0 0 20px rgba(168, 85, 247, 0.5);
            animation: textFadeUp 1.5s ease-out forwards 2.5s;
        }

        #intro-overlay .glint-wrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            border-radius: 20px;
            z-index: 11;
        }

        #intro-overlay .glint-line {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: -150%;
            background: linear-gradient(to right, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
            transform: skewX(-25deg);
            animation: glintPass 3s ease-in-out infinite 2s;
        }

        /* Animations */
        @keyframes logoEntrance {
            0% {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }

            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes textFadeUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shardAppear {
            to {
                opacity: 0.6;
            }
        }

        @keyframes streakSlow {
            0% {
                opacity: 0.3;
                transform: translate(-50%, 50%) rotate(-35deg) translateY(-20px);
            }

            100% {
                opacity: 0.5;
                transform: translate(-50%, 50%) rotate(-35deg) translateY(20px);
            }
        }

        @keyframes glintPass {
            0% {
                left: -150%;
            }

            50% {
                left: 150%;
            }

            100% {
                left: 150%;
            }
        }

        @keyframes introTwinkle {

            0%,
            100% {
                opacity: 0;
                transform: scale(0);
            }

            50% {
                opacity: 0.8;
                transform: scale(1);
            }
        }
    </style>
</head>

<body
    class="bg-black text-slate-100 selection:bg-blue-500 selection:text-white overflow-x-hidden font-sans transition-all duration-300 intro-active">

    <!-- Intro Overlay -->
    <div id="intro-overlay">
        <div class="bg-container">
            <div class="bg-glow-center"></div>
            <div class="shard s1"></div>
            <div class="shard s2"></div>
            <div class="shard s3"></div>
            <div class="shard s4"></div>
            <div class="shard s5"></div>
            <div class="shard s6"></div>
            <div class="particles-container" id="intro-particles"></div>
        </div>

        <div class="content-wrapper">
            <div style="position: relative;">
                <img src="./assets/intro_logo_real.jpg" alt="34 Phone Store Logo" class="logo-visual animate-logo">
                <div class="glint-wrap">
                    <div class="glint-line"></div>
                </div>
            </div>
            <h1 class="text-welcome">Welcome to our store</h1>
        </div>
    </div>

    <script>
        // Intro Logic
        window.addEventListener('load', () => {
            const introSeen = sessionStorage.getItem('intro_seen') === 'true';

            if (introSeen) {
                document.getElementById('intro-overlay').remove();
                document.body.classList.remove('intro-active');
                return;
            }

            // Create Particles
            const container = document.getElementById('intro-particles');
            const count = 30;
            for (let i = 0; i < count; i++) {
                const p = document.createElement('div');
                p.classList.add('intro-particle');
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                const delay = Math.random() * 2;
                const dur = 2 + Math.random() * 3;
                const size = Math.random() < 0.2 ? 6 : 2;
                p.style.left = x + '%';
                p.style.top = y + '%';
                p.style.width = size + 'px';
                p.style.height = size + 'px';
                p.style.animation = `introTwinkle ${dur}s ease-in-out infinite ${delay}s`;
                container.appendChild(p);
            }

            // Remove Intro after delay
            setTimeout(() => {
                const overlay = document.getElementById('intro-overlay');
                overlay.classList.add('fade-out');

                // Allow scrolling again
                setTimeout(() => {
                    document.body.classList.remove('intro-active');
                    sessionStorage.setItem('intro_seen', 'true');
                    // Completely remove element to free memory
                    overlay.remove();
                }, 800);
            }, 4500); // 4.5 seconds for full majesty
        });
    </script>

    <!-- Cinematic Background -->
    <div class="animated-background">
        <div class="bg-image"></div>
        <div class="bg-lines"></div>
        <div class="absolute inset-0 bg-gradient-to-b from-transparent via-slate-950/80 to-slate-950/95"></div>
    </div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass top-0 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <img src="./assets/logo-v2.jpg" alt="34 PHONE BBA Logo"
                    class="h-12 w-auto rounded-lg shadow-lg shadow-purple-500/20">
            </div>
            <div class="hidden md:flex items-center gap-8">
                <a href="#services" class="text-slate-300 hover:text-white transition-colors text-sm font-medium"
                    data-i18n="nav_services">Services</a>
                <a href="#products" class="text-slate-300 hover:text-white transition-colors text-sm font-medium"
                    data-i18n="nav_products">Latest
                    Arrivals</a>
                <a href="#contact" class="text-slate-300 hover:text-white transition-colors text-sm font-medium"
                    data-i18n="nav_contact">Contact</a>

                <!-- Favorites Trigger -->
                <button onclick="openFavoritesModal()"
                    class="relative group text-slate-300 hover:text-pink-500 transition-colors">
                    <i data-lucide="heart" class="w-5 h-5"></i>
                    <span id="nav-fav-count"
                        class="absolute -top-2 -right-2 w-4 h-4 bg-pink-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center opacity-0 transition-opacity">0</span>
                </button>

                <!-- Language Switcher -->
                <div class="relative group z-50">
                    <button
                        class="flex items-center gap-1 text-slate-300 hover:text-white transition-colors text-sm font-medium py-2">
                        <i data-lucide="globe" class="w-4 h-4"></i>
                        <span class="uppercase" id="current-lang-label">EN</span>
                    </button>
                    <div
                        class="absolute right-0 top-full mt-0 w-32 bg-slate-900 border border-slate-800 rounded-lg shadow-xl overflow-hidden hidden group-hover:block z-50">
                        <button onclick="changeLanguage('en')"
                            class="block w-full text-start px-4 py-3 text-sm text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">English</button>
                        <button onclick="changeLanguage('fr')"
                            class="block w-full text-start px-4 py-3 text-sm text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">Français</button>
                        <button onclick="changeLanguage('ar')"
                            class="block w-full text-start px-4 py-3 text-sm text-slate-300 hover:bg-slate-800 hover:text-white transition-colors font-arabic">العربية</button>
                    </div>
                </div>

                <a href="tel:0668029536"
                    class="bg-white/10 hover:bg-white/20 px-5 py-2.5 rounded-full text-sm font-semibold transition-all backdrop-blur-sm border border-white/5 flex items-center gap-2 group">
                    <span data-i18n="call_now">Call Now</span>
                    <i data-lucide="phone" class="w-4 h-4 group-hover:scale-110 transition-transform"></i>
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <button class="md:hidden p-2 text-slate-300"
                onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu"
            class="hidden absolute top-20 left-0 w-full bg-slate-900 border-b border-slate-800 p-6 md:hidden">
            <div class="flex flex-col gap-4">
                <a href="#services" class="text-lg font-medium text-slate-300" data-i18n="nav_services">Services</a>
                <a href="#products" class="text-lg font-medium text-slate-300" data-i18n="nav_products">Latest
                    Arrivals</a>
                <a href="#contact" class="text-lg font-medium text-slate-300" data-i18n="nav_contact">Contact</a>
                <div class="flex gap-4 pt-4 border-t border-slate-800">
                    <button onclick="openFavoritesModal()"
                        class="flex items-center gap-2 text-sm font-medium text-slate-400 hover:text-pink-500">
                        <i data-lucide="heart" class="w-4 h-4"></i>
                        <span data-i18n="nav_favorites">Favorites</span>
                    </button>
                </div>
                <div class="flex gap-4 pt-4 border-t border-slate-800">
                    <button onclick="changeLanguage('en')"
                        class="text-sm font-medium text-slate-400 hover:text-white">EN</button>
                    <button onclick="changeLanguage('fr')"
                        class="text-sm font-medium text-slate-400 hover:text-white">FR</button>
                    <button onclick="changeLanguage('ar')"
                        class="text-sm font-medium text-slate-400 hover:text-white font-arabic">AR</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative min-h-screen flex items-center justify-center pt-20 overflow-hidden">
        <!-- Background Elements -->
        <div class="absolute top-1/4 -left-64 w-96 h-96 bg-blue-600/20 rounded-full blur-[128px]"></div>
        <div class="absolute bottom-0 -right-64 w-96 h-96 bg-violet-600/20 rounded-full blur-[128px]"></div>

        <div class="max-w-7xl mx-auto px-6 relative z-10 grid lg:grid-cols-2 gap-12 items-center">
            <div class="text-center lg:text-start">
                <div
                    class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-slate-900/50 border border-slate-800 mb-6 animate-pulse-slow">
                    <span class="relative flex h-2 w-2">
                        <span
                            class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                    </span>
                    <span class="text-xs font-medium text-slate-400 uppercase tracking-wider"
                        data-i18n="hero_tag">Premium Tech Store in
                        BBA</span>
                </div>

                <h1 class="text-5xl lg:text-7xl font-bold leading-tight mb-6" data-i18n="hero_title">
                    The Best <span class="gradient-text">Tech</span> in <br> Bordj Bou Arreridj
                </h1>

                <p class="text-lg text-slate-400 mb-8 max-w-xl mx-auto lg:mx-0 leading-relaxed" data-i18n="hero_desc">
                    Discover the latest smartphones and premium accessories with guaranteed authenticity and exceptional
                    service.
                </p>

                <div class="flex flex-col sm:flex-row items-center gap-4 justify-center lg:justify-start">
                    <a href="#products"
                        class="w-full sm:w-auto px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-semibold transition-all shadow-lg shadow-blue-600/25 flex items-center justify-center gap-2">
                        <span data-i18n="shop_collection">Shop Collection</span>
                        <i data-lucide="arrow-right" class="w-4 h-4 rtl:rotate-180"></i>
                    </a>
                    <a href="https://maps.app.goo.gl/EDutBigGpWr4jDyx9" target="_blank"
                        class="w-full sm:w-auto px-8 py-4 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-semibold transition-all border border-slate-700 flex items-center justify-center gap-2">
                        <span data-i18n="visit_store">Visit Store</span>
                        <i data-lucide="map-pin" class="w-4 h-4"></i>
                    </a>
                </div>

                <!-- Google Rating -->
                <div class="mt-10 flex items-center justify-center lg:justify-start gap-4">
                    <div class="flex -space-x-3">
                        <div
                            class="w-10 h-10 rounded-full bg-slate-800 border-2 border-slate-950 flex items-center justify-center text-xs font-bold">
                            A</div>
                        <div
                            class="w-10 h-10 rounded-full bg-slate-800 border-2 border-slate-950 flex items-center justify-center text-xs font-bold">
                            K</div>
                        <div
                            class="w-10 h-10 rounded-full bg-slate-800 border-2 border-slate-950 flex items-center justify-center text-xs font-bold">
                            M</div>
                    </div>
                    <div>
                        <div class="flex text-amber-500 mb-1">
                            <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                            <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                            <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                            <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                            <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                        </div>
                        <p class="text-sm text-slate-400 font-medium" data-i18n="google_rating">5-Star Google Maps
                            Rating</p>
                    </div>
                </div>
            </div>

            <!-- Hero Image/Visual -->
            <div class="relative lg:h-[600px] flex items-center justify-center animate-float hidden lg:flex">
                <div class="relative z-10 w-full max-w-md">
                    <!-- Using the iPhone asset as the Hero visual showcase -->
                    <img src="./assets/iphone.png" alt="iPhone 15 Pro Max"
                        class="rounded-3xl shadow-2xl shadow-blue-500/20 ring-1 ring-white/10 rotate-[-12deg] hover:rotate-0 transition-all duration-700 ease-out transform origin-center">
                </div>
                <!-- Decorative Elements -->
                <div
                    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] h-[120%] bg-gradient-to-tr from-blue-500/10 to-violet-500/10 rounded-full blur-3xl -z-10">
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="py-24 relative">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-5xl font-bold mb-4" data-i18n="latest_arrivals_title">Latest <span
                        class="text-blue-500">Arrivals</span></h2>
                <p class="text-slate-400" data-i18n="products_desc">Experience the pinnacle of mobile technology.</p>
            </div>

            <div class="flex flex-col gap-10">
                <!-- Grid & Controls -->
                <main class="flex-1">
                    <!-- Search/Filter Entry Trigger -->
                    <div class="mb-10 flex justify-center">
                        <button onclick="toggleFilters()"
                            class="w-full max-w-2xl group relative bg-slate-800/40 hover:bg-slate-800/60 border border-slate-700/50 rounded-2xl py-4 px-6 flex items-center gap-4 transition-all hover:scale-[1.01] hover:shadow-xl hover:shadow-blue-500/10 active:scale-95">
                            <i data-lucide="search"
                                class="w-5 h-5 text-slate-400 group-hover:text-blue-500 transition-colors"></i>
                            <span class="text-slate-400 text-sm font-medium" data-i18n="search_trigger">Search phones,
                                filter by brand, color...</span>
                            <div
                                class="ml-auto flex items-center gap-2 px-3 py-1 bg-slate-900/50 rounded-lg border border-white/5">
                                <i data-lucide="sliders-horizontal" class="w-3.5 h-3.5 text-blue-500"></i>
                                <span class="text-[10px] font-bold uppercase tracking-wider text-slate-300"
                                    data-i18n="filter_btn">Filter</span>
                            </div>
                        </button>
                    </div>

                    <div id="results-message"
                        class="hidden items-center justify-between mb-8 pb-4 border-b border-white/5">
                        <p class="text-slate-500 text-sm italic"><span id="results-count"
                                class="font-bold text-white not-italic">0</span> <span data-i18n="results_found">results
                                found</span></p>
                    </div>

                    <div id="products-grid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- JS injected -->
                    </div>
                </main>

                <!-- Filters Sidebar (Drawer style for all) -->
                <aside id="filter-panel" class="filter-panel p-8">
                    <div class="flex items-center justify-between mb-10 pb-6 border-b border-white/5">
                        <div class="flex items-center gap-3">
                            <div
                                class="w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center text-blue-500">
                                <i data-lucide="sliders-horizontal" class="w-5 h-5"></i>
                            </div>
                            <h3 class="text-2xl font-bold" data-i18n="filter_title">Search & Filters</h3>
                        </div>
                        <button onclick="toggleFilters()"
                            class="p-3 bg-slate-800/50 hover:bg-slate-800 rounded-xl transition-colors"><i
                                data-lucide="x" class="w-6 h-6"></i></button>
                    </div>

                    <div class="space-y-10">
                        <!-- Search INSIDE panel -->
                        <div>
                            <h4 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4"
                                data-i18n="search_label">Search</h4>
                            <div class="relative group">
                                <i data-lucide="search"
                                    class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 group-focus-within:text-blue-500 transition-colors"></i>
                                <input type="text" id="search-input" placeholder="Search phones..."
                                    class="w-full bg-slate-900/50 border border-slate-800 rounded-2xl py-4 pl-11 pr-4 focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all text-sm"
                                    data-i18n-placeholder="search_placeholder">
                            </div>
                        </div>

                        <!-- Sort -->
                        <div>
                            <h4 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4"
                                data-i18n="sort_by">Sort By</h4>
                            <div class="relative">
                                <select id="sort-select"
                                    class="w-full bg-slate-900/50 border border-slate-800 rounded-2xl py-3.5 px-5 focus:outline-none text-sm cursor-pointer appearance-none">
                                    <option value="newest" data-i18n="sort_newest">Newest</option>
                                    <option value="price-asc" data-i18n="sort_price_low">Price: Low to High</option>
                                    <option value="price-desc" data-i18n="sort_price_high">Price: High to Low</option>
                                    <option value="popular" data-i18n="sort_popular">Best Selling</option>
                                    <option value="rated" data-i18n="sort_rated">Highest Rated</option>
                                </select>
                                <i data-lucide="chevron-down"
                                    class="absolute right-5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 pointer-events-none"></i>
                            </div>
                        </div>

                        <div class="h-px bg-white/5"></div>

                        <!-- Brand Filter -->
                        <div>
                            <h4 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4"
                                data-i18n="brand">Brand</h4>
                            <div class="space-y-3" id="brand-filters">
                                <!-- JS injected -->
                            </div>
                        </div>

                        <!-- Color Filter -->
                        <div>
                            <h4 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4"
                                data-i18n="color_label">Color</h4>
                            <div class="flex flex-wrap gap-2" id="color-filters">
                                <!-- JS injected -->
                            </div>
                        </div>

                        <!-- Condition Filter -->
                        <div>
                            <h4 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4"
                                data-i18n="condition">Condition</h4>
                            <div class="grid grid-cols-2 gap-4">
                                <button onclick="toggleValueFilter('condition', 'new')"
                                    class="filter-chip px-3 py-3 rounded-2xl border border-slate-800 text-xs font-bold transition-all hover:bg-slate-800"
                                    data-filter="condition" data-value="new" data-i18n="filter_new">New</button>
                                <button onclick="toggleValueFilter('condition', 'used')"
                                    class="filter-chip px-3 py-3 rounded-2xl border border-slate-800 text-xs font-bold transition-all hover:bg-slate-800"
                                    data-filter="condition" data-value="used" data-i18n="filter_used">Used</button>
                            </div>
                        </div>

                        <!-- Storage Filter -->
                        <div>
                            <h4 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4"
                                data-i18n="storage">Storage</h4>
                            <div class="flex flex-wrap gap-2" id="storage-filters">
                                <!-- JS injected -->
                            </div>
                        </div>

                        <!-- RAM Filter -->
                        <div>
                            <h4 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4" data-i18n="ram">
                                RAM</h4>
                            <div class="flex flex-wrap gap-2" id="ram-filters">
                                <!-- JS injected -->
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </section>

    <!-- Features / Info Strip -->
    <section id="services" class="py-12 border-y border-white/10 bg-black/40 backdrop-blur-sm">
        <div class="max-w-7xl mx-auto px-6 grid grid-cols-2 md:grid-cols-4 gap-8">
            <div class="flex flex-col items-center text-center gap-3">
                <main
                    class="w-12 h-12 rounded-xl bg-slate-900 border border-slate-800 flex items-center justify-center text-blue-500">
                    <i data-lucide="shield-check" class="w-6 h-6"></i>
                </main>
                <h4 class="font-semibold" data-i18n="feature_original">Original Products</h4>
            </div>
            <div class="flex flex-col items-center text-center gap-3">
                <main
                    class="w-12 h-12 rounded-xl bg-slate-900 border border-slate-800 flex items-center justify-center text-violet-500">
                    <i data-lucide="refresh-ccw" class="w-6 h-6"></i>
                </main>
                <h4 class="font-semibold" data-i18n="feature_exchange">Easy Exchange</h4>
            </div>
            <div class="flex flex-col items-center text-center gap-3">
                <main
                    class="w-12 h-12 rounded-xl bg-slate-900 border border-slate-800 flex items-center justify-center text-amber-500">
                    <i data-lucide="wrench" class="w-6 h-6"></i>
                </main>
                <h4 class="font-semibold" data-i18n="feature_repair">Expert Repair</h4>
            </div>
            <div class="flex flex-col items-center text-center gap-3">
                <main
                    class="w-12 h-12 rounded-xl bg-slate-900 border border-slate-800 flex items-center justify-center text-emerald-500">
                    <i data-lucide="truck" class="w-6 h-6"></i>
                </main>
                <h4 class="font-semibold" data-i18n="feature_fast">Fast Service</h4>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-24 relative overflow-hidden">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <h2 class="text-4xl font-bold mb-12" data-i18n="contact_title">Get in <span
                    class="text-blue-500">Touch</span></h2>

            <div class="grid md:grid-cols-1 gap-6 mb-12 max-w-md mx-auto">
                <!-- Phone -->
                <a href="tel:0668029536"
                    class="p-6 rounded-2xl bg-slate-800/50 border border-slate-700/50 hover:bg-slate-800 transition-colors flex flex-col items-center gap-4 group">
                    <div
                        class="w-12 h-12 rounded-full bg-blue-500/10 flex items-center justify-center text-blue-500 group-hover:scale-110 transition-transform">
                        <i data-lucide="phone" class="w-6 h-6"></i>
                    </div>
                    <div>
                        <p class="text-sm text-slate-400 mb-1" data-i18n="primary_number">Primary Number</p>
                        <p class="text-xl font-bold font-mono">06.68.02.95.36</p>
                    </div>
                </a>
            </div>

            <!-- Socials -->
            <div class="flex justify-center gap-4">
                <a href="https://www.instagram.com/34_phone_bba/" target="_blank"
                    class="flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-semibold hover:opacity-90 transition-opacity">
                    <i data-lucide="instagram" class="w-5 h-5"></i>
                    <span data-i18n="follow_instagram">Follow on Instagram</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-950 py-12 border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <div class="mb-8">
                <span class="text-2xl font-bold tracking-tight">34 PHONE <span class="text-blue-500">BBA</span></span>
            </div>
            <p class="text-slate-500 text-sm" data-i18n="footer_rights">© 2024 34 Phone BBA. All rights reserved.</p>
        </div>
    </footer>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/213668029536" target="_blank" class="fixed bottom-6 right-6 z-50 group">
        <span
            class="absolute right-full mr-4 top-1/2 -translate-y-1/2 bg-white text-slate-900 px-3 py-1 rounded-lg text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-lg"
            data-i18n="chat_whatsapp">Chat
            with us</span>
        <div
            class="w-14 h-14 bg-green-500 hover:bg-green-600 rounded-full flex items-center justify-center shadow-lg shadow-green-500/30 transition-all hover:scale-110">
            <i data-lucide="message-circle" class="w-7 h-7 text-white fill-current"></i>
        </div>
    </a>

    <!-- Product Details Modal -->
    <div id="product-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="modal-title" role="dialog"
        aria-modal="true">
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-slate-950/80 backdrop-blur-sm transition-opacity opacity-0" id="modal-backdrop">
        </div>

        <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <!-- Panel -->
                <div class="relative transform overflow-hidden rounded-3xl bg-slate-900 border border-slate-800 text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-4xl opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                    id="modal-panel">

                    <!-- Close Button -->
                    <div class="absolute right-4 top-4 z-10">
                        <button type="button" onclick="closeProductModal()"
                            class="rounded-full bg-slate-800/50 p-2 text-slate-400 hover:text-white hover:bg-slate-700 transition-colors">
                            <i data-lucide="x" class="w-6 h-6"></i>
                        </button>
                    </div>

                    <div class="grid md:grid-cols-2">
                        <!-- Left: Image Gallery -->
                        <div class="bg-slate-800/30 p-8 flex flex-col gap-6 items-center justify-center">
                            <div class="relative w-full aspect-[4/5] flex items-center justify-center">
                                <img id="modal-main-image" src="" alt="Product Image"
                                    class="max-h-full max-w-full object-contain drop-shadow-2xl transition-all duration-300">
                            </div>
                            <!-- Thumbnails -->
                            <div class="flex gap-3 overflow-x-auto w-full justify-center px-4" id="modal-gallery">
                                <!-- JS will populate this -->
                            </div>
                        </div>

                        <!-- Right: Details -->
                        <div class="p-8 md:p-12 flex flex-col">
                            <span id="modal-badge"
                                class="w-max bg-blue-500/10 text-blue-400 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider mb-4 border border-blue-500/20">
                                In Stock
                            </span>
                            <h3 class="text-3xl font-bold text-white mb-2" id="modal-title">Product Name</h3>
                            <p class="text-2xl font-bold text-blue-400 mb-6" id="modal-price">0.00 DA</p>

                            <!-- Specs Grid -->
                            <div class="grid grid-cols-2 gap-4 mb-8">
                                <div class="bg-slate-800/50 p-4 rounded-xl border border-slate-700/50">
                                    <p class="text-slate-400 text-xs uppercase tracking-wider mb-1" data-i18n="battery">
                                        Battery</p>
                                    <p class="font-semibold text-white" id="modal-battery">100%</p>
                                </div>
                                <div class="bg-slate-800/50 p-4 rounded-xl border border-slate-700/50">
                                    <p class="text-slate-400 text-xs uppercase tracking-wider mb-1">Color</p>
                                    <p class="font-semibold text-white" id="modal-color">Black</p>
                                </div>
                                <div class="bg-slate-800/50 p-4 rounded-xl border border-slate-700/50 col-span-2">
                                    <p class="text-slate-400 text-xs uppercase tracking-wider mb-1">Storage</p>
                                    <p class="font-semibold text-white" id="modal-storage">256GB</p>
                                </div>
                            </div>

                            <div class="mt-auto flex flex-col gap-3">
                                <!-- Rarity Indicator -->
                                <div id="modal-rarity" class="hidden mb-2 rarity-tag">
                                    <div
                                        class="inline-flex items-center gap-2 bg-amber-500/10 text-amber-500 px-4 py-2 rounded-xl border border-amber-500/20 shadow-sm shadow-amber-500/5">
                                        <i data-lucide="alert-triangle" class="w-4 h-4 pulse-text"></i>
                                        <span class="text-sm font-bold tracking-tight" id="modal-rarity-text">Only {n}
                                            left!</span>
                                    </div>
                                </div>

                                <button onclick="openOrderModal()"
                                    class="w-full py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-blue-600/20 flex items-center justify-center gap-2">
                                    <i data-lucide="shopping-cart" class="w-5 h-5"></i>
                                    <span data-i18n="order_now">Order Now</span>
                                </button>
                                <a href="https://wa.me/213668029536" target="_blank"
                                    class="w-full py-4 bg-green-600/10 hover:bg-green-600 border border-green-500/20 text-green-500 hover:text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2">
                                    <i data-lucide="message-circle" class="w-5 h-5"></i>
                                    <span data-i18n="buy_whatsapp">Order via WhatsApp</span>
                                </a>
                                <a href="tel:0668029536"
                                    class="w-full py-4 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold transition-all border border-slate-700 flex items-center justify-center gap-2">
                                    <i data-lucide="phone" class="w-5 h-5"></i>
                                    <span data-i18n="call_confirm">Call to Order</span>
                                </a>
                                <button id="modal-fav-btn" onclick="toggleFavoriteFromModal()"
                                    class="w-full py-4 bg-slate-800/50 hover:bg-slate-800 text-slate-300 hover:text-pink-500 rounded-xl font-bold transition-all border border-slate-700/50 flex items-center justify-center gap-2 group">
                                    <i data-lucide="heart" class="w-5 h-5 group-hover:fill-current transition-colors"
                                        id="modal-fav-icon"></i>
                                    <span id="modal-fav-text" data-i18n="add_to_favorites">Add to Favorites</span>
                                </button>

                                <!-- Admin Only: Quick Edit -->
                                <button id="admin-edit-btn" onclick="quickAdminEdit()"
                                    class="w-full py-4 bg-blue-600/10 hover:bg-blue-600/20 text-blue-500 rounded-xl font-bold transition-all border border-blue-500/20 hidden flex items-center justify-center gap-2">
                                    <i data-lucide="edit" class="w-4 h-4"></i>
                                    تعديل بيانات الهاتف (المسؤول)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Favorites Modal (Side Panel) -->
    <div id="favorites-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="modal-title" role="dialog"
        aria-modal="true">
        <div class="fixed inset-0 bg-slate-950/80 backdrop-blur-sm transition-opacity opacity-0" id="fav-backdrop">
        </div>

        <div class="fixed inset-y-0 right-0 z-10 w-full max-w-md bg-slate-900 shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out border-l border-slate-800"
            id="fav-panel">
            <div class="h-full flex flex-col p-6">
                <!-- Header -->
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-2xl font-bold flex items-center gap-2">
                        <i data-lucide="heart" class="w-6 h-6 text-pink-500 fill-current"></i>
                        <span data-i18n="favorites_title">My Favorites</span>
                    </h2>
                    <button onclick="closeFavoritesModal()"
                        class="p-2 rounded-full bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white transition-colors">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                </div>

                <!-- List -->
                <div id="favorites-list" class="flex-1 overflow-y-auto flex flex-col gap-4 pr-2">
                    <!-- Items will be injected here -->
                    <div class="text-center text-slate-500 mt-10" data-i18n="dts_no_favorites">
                        No favorites yet.
                    </div>
                </div>

                <!-- NEW: Customer Upload Section -->
                <div class="mt-8 pt-8 border-t border-slate-800">
                    <h3 class="text-sm font-bold text-slate-400 mb-4 uppercase tracking-wider">هل تود إرفاق صورة؟ (وصل
                        أو تبادل)</h3>
                    <div class="media-upload-box bg-slate-800/30 border-2 border-dashed border-slate-700 p-6 rounded-xl text-center cursor-pointer hover:border-blue-500/50 transition-colors"
                        onclick="document.getElementById('customer-file-input').click()">
                        <i data-lucide="camera" class="w-8 h-8 mx-auto mb-2 text-slate-500"></i>
                        <p class="text-xs text-slate-400">انقر لرفع وصل الدفع أو صورة هاتفك للتبادل</p>
                        <input type="file" id="customer-file-input" multiple style="display: none;"
                            onchange="handleCustomerFileUpload(event)">
                    </div>
                    <div id="customer-previews" class="flex gap-2 mt-4 overflow-x-auto pb-2"></div>
                </div>

                <!-- Footer Action -->
                <div class="mt-auto pt-6">
                    <button onclick="sendOrderWithImages()"
                        class="w-full py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-blue-600/20 flex items-center justify-center gap-2">
                        <i data-lucide="send" class="w-5 h-5"></i>
                        إرسال الطلب عبر واتساب
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Form Modal -->
    <div id="order-modal" class="fixed inset-0 z-[110] hidden" aria-labelledby="order-title" role="dialog"
        aria-modal="true">
        <div class="fixed inset-0 bg-slate-950/90 backdrop-blur-md transition-opacity" id="order-backdrop"
            onclick="closeOrderModal()"></div>
        <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4">
                <div
                    class="relative transform overflow-hidden rounded-3xl bg-slate-900 border border-slate-700 shadow-2xl transition-all w-full max-w-lg p-8">
                    <button onclick="closeOrderModal()"
                        class="absolute right-6 top-6 text-slate-500 hover:text-white transition-colors">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                    <h2 class="text-2xl font-bold mb-6 text-white text-center" data-i18n="order_now">Order Now</h2>

                    <form id="order-form" onsubmit="submitOrderForm(event)" class="space-y-4">
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"
                                    data-i18n="first_last_name"></label>
                                <input type="text" id="order-name" required
                                    class="w-full bg-slate-800 border border-slate-700 rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white shadow-inner">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"
                                    data-i18n="phone_number"></label>
                                <input type="tel" id="order-phone" required
                                    class="w-full bg-slate-800 border border-slate-700 rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white shadow-inner">
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"
                                        data-i18n="city"></label>
                                    <input type="text" id="order-city" required
                                        class="w-full bg-slate-800 border border-slate-700 rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white shadow-inner">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"
                                        data-i18n="municipality"></label>
                                    <input type="text" id="order-municipality" required
                                        class="w-full bg-slate-800 border border-slate-700 rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white shadow-inner">
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"
                                        data-i18n="quantity"></label>
                                    <input type="number" id="order-qty" value="1" min="1" required
                                        class="w-full bg-slate-800 border border-slate-700 rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white shadow-inner">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"
                                        data-i18n="delivery_type"></label>
                                    <select id="order-delivery"
                                        class="w-full bg-slate-800 border border-slate-700 rounded-xl py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white shadow-inner appearance-none cursor-pointer">
                                        <option value="home" data-i18n="home_delivery"></option>
                                        <option value="office" data-i18n="office_delivery"></option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <button type="submit"
                            class="w-full py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-blue-600/20 mt-4"
                            data-i18n="confirm_order"></button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ... Product Data ... (Kept existing)
        const products_db = {};

        const modal = document.getElementById('product-modal');
        const backdrop = document.getElementById('modal-backdrop');
        const panel = document.getElementById('modal-panel');
        let currentLang = localStorage.getItem('lang') || 'en';
        let currentOpenProductId = null;

        // Filtering State
        let activeFilters = {
            search: '',
            sort: 'newest',
            brands: [],
            conditions: [],
            storages: [],
            colors: [],
            rams: []
        };

        function toggleFilters() {
            document.getElementById('filter-panel').classList.toggle('open');
        }

        function initFilterSystem() {
            // Initial render (likely empty until cloud loads)
            updateFilterSidebar();

            // Listeners

            // Listeners
            document.getElementById('search-input').addEventListener('input', (e) => {
                activeFilters.search = e.target.value.toLowerCase();
                applyFilters();
            });

            document.getElementById('sort-select').addEventListener('change', (e) => {
                activeFilters.sort = e.target.value;
                applyFilters();
            });

            applyFilters();
        }

        function updateFilterSidebar() {
            const allProducts = getAllProducts();

            // Predefined lists to ensure visibility
            const predefinedBrands = ['Apple', 'Samsung', 'Xiaomi', 'Huawei', 'Oppo', 'Realme', 'Honor'];
            const predefinedStorages = ['64GB', '128GB', '256GB', '512GB', '1TB'];
            const predefinedRams = ['4GB', '6GB', '8GB', '12GB', '16GB', '24GB'];
            const predefinedColors = [
                'color_black', 'color_white', 'color_red', 'color_blue', 'color_green',
                'color_gold', 'color_silver', 'color_gray', 'color_purple', 'color_pink',
                'color_yellow', 'color_space_gray', 'color_midnight', 'color_starlight',
                'color_graphite', 'color_sierra_blue', 'color_alpine_green', 'color_deep_purple',
                'color_titanium', 'color_natural_titanium'
            ];

            // Extract real options and merge
            const realBrands = [...new Set(allProducts.map(p => p.brand))].filter(Boolean);
            const realStorages = [...new Set(allProducts.map(p => p.storage))].filter(Boolean);
            const realRams = [...new Set(allProducts.map(p => p.ram))].filter(Boolean);
            const realColors = [...new Set(allProducts.map(p => p.colorKey))].filter(Boolean);

            const brands = [...new Set([...predefinedBrands, ...realBrands])].sort();

            // Custom sort for storage/ram to handle GB/TB
            const parseSize = (s) => {
                if (!s) return 0;
                s = s.toUpperCase();
                if (s.includes('TB')) return parseFloat(s) * 1024;
                return parseFloat(s);
            };

            const storages = [...new Set([...predefinedStorages, ...realStorages])].sort((a, b) => parseSize(a) - parseSize(b));
            const rams = [...new Set([...predefinedRams, ...realRams])].sort((a, b) => parseSize(a) - parseSize(b));

            // Colors
            const colors = [...new Set([...predefinedColors, ...realColors])].sort();

            renderFilterGroup('brand-filters', brands, 'brands', false, allProducts);
            renderFilterGroup('storage-filters', storages, 'storages', true, allProducts);
            renderFilterGroup('color-filters', colors, 'colors', true, allProducts);
            renderFilterGroup('ram-filters', rams, 'rams', true, allProducts);
        }

        function renderFilterGroup(containerId, items, filterKey, isChip = false, products = []) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            items.forEach(item => {
                // Count based on the passed products list
                const count = products.filter(p => {
                    if (filterKey === 'colors') return p.colorKey === item;
                    return p[filterKey.slice(0, -1)] === item;
                }).length;
                const el = document.createElement('button');

                if (isChip) {
                    const label = filterKey === 'colors' ? (translations[currentLang][item] || item) : item;
                    el.className = 'filter-chip px-3 py-2 rounded-xl border border-slate-800 text-[10px] font-bold transition-all hover:bg-slate-800 flex items-center gap-2';
                    el.innerHTML = `<span>${label}</span><span class="opacity-40">${count}</span>`;
                } else {
                    el.className = 'w-full flex items-center justify-between text-sm text-slate-400 hover:text-white transition-colors group py-1';
                    el.innerHTML = `
                        <div class="flex items-center gap-3">
                            <div class="w-4 h-4 rounded border border-slate-700 group-hover:border-blue-500 transition-colors flex items-center justify-center checkbox-inner"></div>
                            <span>${item}</span>
                        </div>
                        <span class="text-xs opacity-40">${count}</span>
                    `;
                }

                el.onclick = () => {
                    const idx = activeFilters[filterKey].indexOf(item);
                    if (idx === -1) activeFilters[filterKey].push(item);
                    else activeFilters[filterKey].splice(idx, 1);

                    // Style update
                    if (isChip) {
                        el.classList.toggle('bg-blue-600', activeFilters[filterKey].includes(item));
                        el.classList.toggle('border-blue-500', activeFilters[filterKey].includes(item));
                    } else {
                        const check = el.querySelector('.checkbox-inner');
                        check.classList.toggle('active', activeFilters[filterKey].includes(item));
                        el.classList.toggle('text-white', activeFilters[filterKey].includes(item));
                    }

                    applyFilters();
                };
                container.appendChild(el);
            });
        }

        function toggleValueFilter(key, value) {
            const group = activeFilters[key + 's'];
            const idx = group.indexOf(value);
            if (idx === -1) group.push(value);
            else group.splice(idx, 1);

            document.querySelectorAll(`[data-filter="${key}"][data-value="${value}"]`).forEach(el => {
                el.classList.toggle('bg-blue-600', group.includes(value));
                el.classList.toggle('border-blue-500', group.includes(value));
            });

            applyFilters();
        }

        // --- FIREBASE CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyD-7y_ISkDUaTi2guJQcweBC_dID1LkvFM",
            authDomain: "phone-bba.firebaseapp.com",
            projectId: "phone-bba",
            storageBucket: "phone-bba.firebasestorage.app",
            messagingSenderId: "183935757816",
            appId: "1:183935757816:web:c694c25a9913bf3a7d3a0d",
            measurementId: "G-0227S4C60W"
        };

        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let cloud_products = [];
        let cloud_articles = [];

        db.collection('products').onSnapshot(snap => {
            cloud_products = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));
            updateFilterSidebar(); // Refresh filters with new data
            applyFilters(); // Re-render grid
            if (!document.getElementById('favorites-modal').classList.contains('hidden')) {
                renderFavoritesList();
            }
        });

        db.collection('articles').onSnapshot(snap => {
            cloud_articles = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));
            renderCloudArticles();
        });

        function getAllProducts() {
            // Merge hardcoded + Cloud CMS products
            const mapped_cms = cloud_products.map(p => ({
                id: p.id,
                brand: p.brand,
                condition: p.condition === 'New' ? 'new' : 'used',
                storage: p.storage,
                battery: p.battery + '%',
                sales: 50,
                rating: 5,
                date: p.date || new Date().toISOString(),
                stock: p.stock,
                isCMS: true,
                title: p.name,
                price: parseInt(p.price.toString().replace(/[^0-9]/g, '')),
                priceText: p.price + ' دج',
                color: p.color,
                colorKey: normalizeColor(p.color),
                ram: p.ram ? p.ram : estimateRAM(p.name),
                orderMedia: p.orderMedia || [],
                images: p.media && p.media.length > 0 ? p.media.map(m => m.url) : ['./assets/iphone.png'],
                badgeText: p.condition === 'New' ? translations[currentLang].badge_new_arrival : translations[currentLang].badge_used,
                sold: p.sold || false
            }));

            const cmsIds = mapped_cms.map(p => p.id);
            const hardcodedFiltered = Object.values(products_db).filter(p => !cmsIds.includes(p.id));
            return [...hardcodedFiltered, ...mapped_cms];
        }

        function estimateRAM(name) {
            if (!name) return null;
            // Explicit check first
            const match = name.match(/(\d+)GB RAM/i);
            if (match) return match[1] + 'GB';

            // Heuristics for common phones
            const n = name.toLowerCase();
            if (n.includes('iphone 16') || n.includes('iphone 15 pro') || n.includes('iphone 14 pro')) return '6GB'; // 15/16 base can be 6/8
            if (n.includes('iphone 15') || n.includes('iphone 14')) return '6GB';
            if (n.includes('iphone 13') || n.includes('iphone 12') || n.includes('iphone 11')) return '4GB';
            if (n.includes('iphone xs') || n.includes('iphone x') || n.includes('iphone xr')) return '3GB';
            if (n.includes('iphone 8 plus') || n.includes('iphone 7 plus')) return '3GB';
            if (n.includes('pro max') || n.includes('ultra')) return '12GB'; // Generic flagship guess

            return null;
        }

        function normalizeColor(c) {
            if (!c) return 'color_black';
            const lower = c.toLowerCase().trim();
            const map = {
                'black': 'color_black', 'noir': 'color_black', 'أسود': 'color_black',
                'white': 'color_white', 'blanc': 'color_white', 'أبيض': 'color_white',
                'red': 'color_red', 'rouge': 'color_red', 'أحمر': 'color_red',
                'blue': 'color_blue', 'bleu': 'color_blue', 'أزرق': 'color_blue',
                'green': 'color_green', 'vert': 'color_green', 'أخضر': 'color_green',
                'gold': 'color_gold', 'or': 'color_gold', 'ذهبي': 'color_gold',
                'silver': 'color_silver', 'argent': 'color_silver', 'فضي': 'color_silver',
                'gray': 'color_gray', 'grey': 'color_gray', 'gris': 'color_gray', 'رمادي': 'color_gray',
                'purple': 'color_purple', 'violet': 'color_purple', 'بنفسجي': 'color_purple',
                'pink': 'color_pink', 'rose': 'color_pink', 'وردي': 'color_pink',
                'yellow': 'color_yellow', 'jaune': 'color_yellow', 'أصفر': 'color_yellow',
                'orange': 'color_orange', 'برتقالي': 'color_orange',
                'titanium': 'color_titanium', 'natural titanium': 'color_natural_titanium',
                'space gray': 'color_space_gray', 'midnight': 'color_midnight', 'starlight': 'color_starlight',
                'graphite': 'color_graphite', 'sierra blue': 'color_sierra_blue', 'alpine green': 'color_alpine_green',
                'deep purple': 'color_deep_purple'
            };
            return map[lower] || c;
        }

        function applyFilters() {
            let filtered = getAllProducts();

            // Search
            if (activeFilters.search) {
                const s = activeFilters.search.toLowerCase();
                filtered = filtered.filter(p => {
                    const title = p.isCMS ? p.title : translations[currentLang][p.titleKey];
                    return title.toLowerCase().includes(s) || p.brand.toLowerCase().includes(s);
                });
            }

            // Brand
            if (activeFilters.brands.length > 0) {
                filtered = filtered.filter(p => activeFilters.brands.includes(p.brand));
            }

            // Condition
            if (activeFilters.conditions.length > 0) {
                filtered = filtered.filter(p => activeFilters.conditions.includes(p.condition));
            }

            // Storage
            if (activeFilters.storages.length > 0) {
                filtered = filtered.filter(p => activeFilters.storages.includes(p.storage));
            }

            // RAM
            if (activeFilters.rams.length > 0) {
                filtered = filtered.filter(p => activeFilters.rams.includes(p.ram));
            }

            // Sorting
            switch (activeFilters.sort) {
                case 'newest':
                    filtered.sort((a, b) => new Date(b.date) - new Date(a.date));
                    break;
                case 'price-asc':
                    filtered.sort((a, b) => a.price - b.price);
                    break;
                case 'price-desc':
                    filtered.sort((a, b) => b.price - a.price);
                    break;
                case 'popular':
                    filtered.sort((a, b) => b.sales - a.sales);
                    break;
                case 'rated':
                    filtered.sort((a, b) => b.rating - a.rating);
                    break;
                default:
                    filtered.sort((a, b) => new Date(b.date) - new Date(a.date));
            }

            renderProductsGrid(filtered);
            document.getElementById('results-count').textContent = filtered.length;

            const isFilterActive = activeFilters.search || activeFilters.brands.length > 0 || activeFilters.conditions.length > 0 || activeFilters.storages.length > 0 || activeFilters.rams.length > 0;
            const resultsMsg = document.getElementById('results-message');
            if (isFilterActive) {
                resultsMsg.classList.remove('hidden');
                resultsMsg.classList.add('flex');
            } else {
                resultsMsg.classList.add('hidden');
                resultsMsg.classList.remove('flex');
            }
        }

        function renderProductsGrid(products) {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = '';
            const t = translations[currentLang];

            products.forEach(p => {
                const isFav = favorites.includes(p.id);
                const title = p.isCMS ? p.title : t[p.titleKey];
                const price = p.isCMS ? p.priceText : t[p.priceKey];
                const badge = p.isCMS ? p.badgeText : t[p.badgeKey];
                const color = p.isCMS ? p.color : (t[p.colorKey] || p.colorKey);

                let stockHtml = '';
                if (p.stock > 0 && p.stock <= 5) {
                    stockHtml = `<div class="mt-3 text-[10px] font-bold text-amber-500 bg-amber-500/10 px-2.5 py-1 rounded-lg w-max flex items-center gap-1 border border-amber-500/20">
                                    <i data-lucide="alert-triangle" class="w-3 h-3"></i>
                                    ${getStockMessage(p.stock)}
                                 </div>`;
                } else if (p.stock === 0) {
                    stockHtml = `<div class="mt-3 text-[10px] font-bold text-red-500 bg-red-500/10 px-2.5 py-1 rounded-lg w-max flex items-center gap-1 border border-red-500/20">
                                    <i data-lucide="alert-circle" class="w-3 h-3"></i>
                                     ${t.out_of_stock}
                                 </div>`;
                }

                if (p.sold) {
                    stockHtml = `<div class="mt-3 text-[10px] font-bold text-slate-100 bg-red-600 px-2.5 py-1 rounded-lg w-max flex items-center gap-1 border border-red-500 shadow-lg shadow-red-600/20">
                                    <i data-lucide="check-circle" class="w-3 h-3"></i>
                                    ${t.sold_out || 'Sold Out'}
                                 </div>`;
                }

                const card = document.createElement('div');
                card.className = `bg-slate-800/50 rounded-3xl p-8 border border-slate-700/50 card-hovering group relative overflow-hidden flex flex-col ${p.sold ? 'opacity-75 grayscale-[0.3]' : ''}`;
                card.innerHTML = `
                    <button onclick="toggleFavorite('${p.id}')" class="absolute top-4 left-4 z-20 ${isFav ? 'text-pink-500' : 'text-slate-400'} hover:text-pink-500 transition-colors p-2 rounded-full bg-slate-900/50 backdrop-blur-sm">
                        <i data-lucide="heart" class="w-5 h-5 fav-icon-${p.id} ${isFav ? 'fill-current' : ''}"></i>
                    </button>
                    <div class="absolute top-0 right-0 p-4">
                        <span class="bg-${p.condition === 'new' ? 'purple' : 'green'}-500 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider">
                            ${badge}
                        </span>
                    </div>
                    <div class="h-64 mb-8 flex items-center justify-center p-4">
                        <img src="${p.images[0]}" alt="${title}" class="h-full object-contain drop-shadow-2xl group-hover:scale-105 transition-transform duration-500">
                    </div>
                    <h3 class="text-2xl font-bold mb-2">${title}</h3>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="text-xs text-slate-400 bg-slate-700/50 px-2 py-1 rounded">
                            <span data-i18n="battery">${t.battery}</span>: ${p.battery}
                        </span>
                        <span class="text-xs text-slate-400 bg-slate-700/50 px-2 py-1 rounded">${color}</span>
                        <span class="text-xs text-slate-400 bg-slate-700/50 px-2 py-1 rounded">${p.storage}</span>
                    </div>
                    ${stockHtml}
                    <div class="flex items-center justify-between mt-auto pt-6">
                        <span class="text-blue-400 font-bold text-lg">${price}</span>
                        <button onclick="openProductModal('${p.id}')"
                            class="w-10 h-10 rounded-full bg-white text-slate-900 flex items-center justify-center hover:bg-blue-500 hover:text-white transition-colors">
                            <i data-lucide="shopping-bag" class="w-5 h-5"></i>
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
            lucide.createIcons();
        }

        function getStockMessage(count) {
            const t = translations[currentLang];
            if (currentLang === 'ar') {
                if (count === 1) return "بقيت قطعة واحدة فقط في المخزون!";
                if (count === 2) return "بقيت قطعتان فقط في المخزون!";
            }
            let msg = t.stock_low || "Only {n} left!";
            return msg.replace('{n}', count);
        }

        function openProductModal(id) {
            // Find in hardcoded or Cloud CMS
            let product = products_db[id];
            const t = translations[currentLang];

            if (!product) {
                const found = cloud_products.find(cp => cp.id === id);
                if (found) {
                    const allMedia = [
                        ...(found.media || []),
                        ...(found.orderMedia || [])
                    ];
                    product = {
                        title: found.name,
                        price: found.price + ' دج',
                        battery: found.battery + '%',
                        color: found.color,
                        storage: found.storage,
                        badge: found.condition === 'New' ? (currentLang === 'ar' ? 'جديد' : 'New') : (currentLang === 'ar' ? 'مستعمل' : 'Used'),
                        stock: found.stock,
                        sold: found.sold,
                        images: allMedia.length > 0 ? allMedia.map(m => m.url) : ['./assets/iphone.png']
                    };
                }
            } else {
                product = {
                    title: t[product.titleKey],
                    price: t[product.priceKey],
                    battery: product.battery,
                    color: t[product.colorKey] || product.colorKey,
                    storage: product.storage,
                    badge: t[product.badgeKey],
                    stock: product.stock,
                    sold: product.sold,
                    images: product.images
                };
            }

            if (!product) return;

            document.getElementById('modal-title').textContent = product.title;
            document.getElementById('modal-price').textContent = product.price;
            document.getElementById('modal-battery').textContent = product.battery;
            document.getElementById('modal-color').textContent = product.color;
            document.getElementById('modal-storage').textContent = product.storage;
            document.getElementById('modal-badge').textContent = product.badge;

            // Rarity / Stock Handle
            const rarityEl = document.getElementById('modal-rarity');
            const rarityText = document.getElementById('modal-rarity-text');
            if (product.stock > 0 && product.stock <= 5) {
                rarityEl.classList.remove('hidden');
                rarityText.textContent = getStockMessage(product.stock);
                // Reset styles from potential out-of-stock state
                rarityEl.querySelector('div').classList.replace('text-red-500', 'text-amber-500');
                rarityEl.querySelector('div').classList.replace('bg-red-500/10', 'bg-amber-500/10');
            } else if (product.stock === 0) {
                rarityEl.classList.remove('hidden');
                rarityText.textContent = t.out_of_stock || "Out of stock";
                rarityEl.querySelector('div').classList.replace('text-amber-500', 'text-red-500');
                rarityEl.querySelector('div').classList.replace('bg-amber-500/10', 'bg-red-500/10');
            } else {
                rarityEl.classList.add('hidden');
            }

            if (product.sold) {
                rarityEl.classList.remove('hidden');
                rarityText.textContent = t.sold_out_desc || 'This phone is sold';
                rarityEl.querySelector('div').classList.replace('text-amber-500', 'text-slate-100');
                rarityEl.querySelector('div').classList.replace('text-red-500', 'text-slate-100');
                rarityEl.querySelector('div').classList.add('bg-red-600', 'border-red-500');
                rarityEl.querySelector('div').classList.remove('bg-amber-500/10', 'bg-red-500/10', 'border-amber-500/20', 'border-red-500/20');
            } else {
                rarityEl.querySelector('div').classList.remove('bg-red-600', 'border-red-500');
                rarityEl.querySelector('div').classList.add('bg-amber-500/10', 'border-amber-500/20');
            }

            // Setup Main Image / Video
            const galleryMedia = [...(product.images || []).map(url => ({ url, type: 'image' })), ...(product.orderMedia || [])];
            const mainImg = document.getElementById('modal-main-image');
            const mainVideo = document.getElementById('modal-main-video') || createVideoElement();

            function createVideoElement() {
                const v = document.createElement('video');
                v.id = 'modal-main-video';
                v.className = 'max-h-full max-w-full object-contain drop-shadow-2xl transition-all duration-300 hidden';
                v.controls = true;
                mainImg.parentElement.appendChild(v);
                return v;
            }

            const setMainMedia = (m) => {
                if (m.type === 'video') {
                    mainImg.classList.add('hidden');
                    mainVideo.classList.remove('hidden');
                    mainVideo.src = m.url;
                    mainVideo.play();
                } else {
                    mainVideo.classList.add('hidden');
                    mainVideo.pause();
                    mainImg.classList.remove('hidden');
                    mainImg.src = m.url;
                }
            };

            setMainMedia(galleryMedia[0] || { url: './assets/iphone.png', type: 'image' });

            // Build Gallery Thumbnails
            const gallery = document.getElementById('modal-gallery');
            gallery.innerHTML = '';
            galleryMedia.forEach((m, idx) => {
                const btn = document.createElement('button');
                btn.className = `flex-shrink-0 w-16 h-20 rounded-lg border-2 overflow-hidden transition-all ${idx === 0 ? 'border-blue-500' : 'border-slate-700'}`;

                if (m.type === 'video') {
                    btn.innerHTML = `<div class="w-full h-full bg-slate-800 flex items-center justify-center text-xl">🎥</div>`;
                } else {
                    btn.innerHTML = `<img src="${m.url}" class="w-full h-full object-cover">`;
                }

                btn.onclick = () => {
                    setMainMedia(m);
                    Array.from(gallery.children).forEach(c => c.classList.replace('border-blue-500', 'border-slate-700'));
                    btn.classList.replace('border-slate-700', 'border-blue-500');
                };
                gallery.appendChild(btn);
            });

            // Update Favorite Button State in Modal
            currentOpenProductId = id;
            updateModalFavoriteUI();

            const isAdmin = localStorage.getItem('cms_session') !== null;
            const adminBtn = document.getElementById('admin-edit-btn');
            if (adminBtn) {
                if (isAdmin) {
                    adminBtn.classList.remove('hidden');
                    adminBtn.onclick = () => quickAdminEdit(id);
                } else {
                    adminBtn.classList.add('hidden');
                }
            }

            // Show Modal
            modal.classList.remove('hidden');
            // Small timeout for transition
            setTimeout(() => {
                backdrop.classList.remove('opacity-0');
                panel.classList.remove('opacity-0', 'translate-y-4', 'sm:translate-y-0', 'sm:scale-95');
                panel.classList.add('opacity-100', 'translate-y-0', 'sm:scale-100');
            }, 10);

            // Prevent body scroll
            document.body.style.overflow = 'hidden';

            // Refresh icons for new button
            lucide.createIcons();
        }

        function closeProductModal() {
            backdrop.classList.add('opacity-0');
            panel.classList.remove('opacity-100', 'translate-y-0', 'sm:scale-100');
            panel.classList.add('opacity-0', 'translate-y-4', 'sm:translate-y-0', 'sm:scale-95');

            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }

        // Close on backdrop click
        modal.addEventListener('click', (e) => {
            if (e.target === backdrop || e.target.closest('#modal-panel') === null) {
                closeProductModal();
            }
        });

        // Update translations inside modal dynamically would require re-opening or a more complex binding
        // For now, simpler to just rely on re-opening or page refresh for lang change
        // But we should hook into the global changeLanguage to update if modal is open (edge case)

        /* --- Favorites Feature Logic --- */
        let favorites = JSON.parse(localStorage.getItem('favorites')) || [];

        function saveFavorites() {
            localStorage.setItem('favorites', JSON.stringify(favorites));
            updateFavoritesUI();
        }

        function toggleFavorite(id) {
            const index = favorites.indexOf(id);
            if (index === -1) {
                favorites.push(id);
                // Optional: Show toast
            } else {
                favorites.splice(index, 1);
            }
            saveFavorites();

            // Re-render list if modal is open
            if (!document.getElementById('favorites-modal').classList.contains('hidden')) {
                renderFavoritesList();
            }

            // Update Modal UI if matches current product
            if (id === currentOpenProductId) {
                updateModalFavoriteUI();
            }
        }

        function toggleFavoriteFromModal() {
            if (currentOpenProductId) {
                toggleFavorite(currentOpenProductId);
            }
        }

        function updateModalFavoriteUI() {
            if (!currentOpenProductId) return;

            const isFav = favorites.includes(currentOpenProductId);
            const btn = document.getElementById('modal-fav-btn');
            const icon = document.getElementById('modal-fav-icon');
            const text = document.getElementById('modal-fav-text');
            const t = translations[currentLang];

            if (isFav) {
                icon.classList.add('fill-current', 'text-pink-500');
                btn.classList.add('text-pink-500');
                btn.classList.remove('text-slate-300');
                text.textContent = t.remove_from_favorites || "Remove from Favorites";
            } else {
                icon.classList.remove('fill-current', 'text-pink-500');
                btn.classList.remove('text-pink-500');
                btn.classList.add('text-slate-300');
                text.textContent = t.add_to_favorites || "Add to Favorites";
            }
        }

        function updateFavoritesUI() {
            // Update Navbar Count
            const countBadge = document.getElementById('nav-fav-count');
            if (countBadge) {
                countBadge.textContent = favorites.length;
                countBadge.classList.toggle('opacity-0', favorites.length === 0);
            }

            // Update Heart Icons on Cards
            document.querySelectorAll('[class*="fav-icon-"]').forEach(icon => {
                // reset
                icon.classList.remove('fill-pink-500', 'text-pink-500');
                icon.parentElement.classList.remove('text-pink-500');
                icon.parentElement.classList.add('text-slate-400');
            });

            favorites.forEach(id => {
                const icon = document.querySelector(`.fav-icon-${id}`);
                if (icon) {
                    icon.classList.add('fill-pink-500', 'text-pink-500');
                    icon.parentElement.classList.remove('text-slate-400');
                    icon.parentElement.classList.add('text-pink-500');
                }
            });
        }

        /* --- Order Form Logic --- */
        function openOrderModal() {
            document.getElementById('order-modal').classList.remove('hidden');
            document.getElementById('order-qty').value = 1;
            // Scroll to top of form
            document.getElementById('order-form').scrollTop = 0;
            lucide.createIcons();
        }

        function closeOrderModal() {
            document.getElementById('order-modal').classList.add('hidden');
        }

        async function submitOrderForm(e) {
            e.preventDefault();
            const product = cloud_products.find(p => p.id === currentOpenProductId);
            if (!product) return;

            const name = document.getElementById('order-name').value;
            const phone = document.getElementById('order-phone').value;
            const city = document.getElementById('order-city').value;
            const mun = document.getElementById('order-municipality').value;
            const qty = document.getElementById('order-qty').value;
            const delivery = document.getElementById('order-delivery').value;
            const deliveryText = translations[currentLang][delivery + '_delivery'] || delivery;

            const message = `*طلب جديد لبضاعة*%0A%0A` +
                `*الهاتف:* ${product.name}%0A` +
                `*السعر:* ${product.price} DA%0A` +
                `*الإسم واللقب:* ${name}%0A` +
                `*الهاتف:* ${phone}%0A` +
                `*المدينة:* ${city}%0A` +
                `*البلدية:* ${mun}%0A` +
                `*الكمية:* ${qty}%0A` +
                `*طريقة التوصيل:* ${deliveryText}%0A%0A` +
                `_شكرا لتعاملكم مع 34 Phone BBA_`;

            window.open(`https://wa.me/213668029536?text=${message}`, '_blank');
            closeOrderModal();
            closeProductModal();
        }

        function openFavoritesModal() {
            const modal = document.getElementById('favorites-modal');
            const backdrop = document.getElementById('fav-backdrop');
            const panel = document.getElementById('fav-panel');

            renderFavoritesList();

            modal.classList.remove('hidden');
            setTimeout(() => {
                backdrop.classList.remove('opacity-0');
                panel.classList.remove('translate-x-full');
            }, 10);
            document.body.style.overflow = 'hidden';
        }

        function closeFavoritesModal() {
            const modal = document.getElementById('favorites-modal');
            const backdrop = document.getElementById('fav-backdrop');
            const panel = document.getElementById('fav-panel');

            backdrop.classList.add('opacity-0');
            panel.classList.add('translate-x-full');

            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }

        function renderFavoritesList() {
            const container = document.getElementById('favorites-list');
            container.innerHTML = '';

            const t = translations[currentLang];

            if (favorites.length === 0) {
                container.innerHTML = `<div class="text-center text-slate-500 mt-10">${t.favorites_empty || "No favorites yet."}</div>`;
                return;
            }

            favorites.forEach(id => {
                let product = products_db[id];
                let title = '';
                let img = '';
                let priceText = '';

                if (!product) {
                    const found = cloud_products.find(cp => cp.id === id);
                    if (found) {
                        product = found;
                        title = found.name;
                        priceText = found.price + ' دج';
                        // Prioritize Order-specific image, fallback to gallery image
                        if (found.orderMedia && found.orderMedia.length > 0) {
                            img = found.orderMedia[0].url;
                        } else {
                            img = found.media && found.media.length > 0 ? found.media[0].url : './assets/iphone.png';
                        }
                    }
                } else {
                    title = t[product.titleKey];
                    priceText = t[product.priceKey];
                    img = product.images[0];
                }

                if (!product) return;

                const item = document.createElement('div');
                item.className = 'flex gap-4 p-4 bg-slate-800/50 rounded-xl border border-slate-700/50 relative group';
                item.innerHTML = `
                    <div class="w-20 h-20 bg-slate-900/50 rounded-lg flex items-center justify-center p-2">
                        <img src="${img}" class="max-w-full max-h-full object-contain">
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-white text-sm mb-1">${title}</h4>
                        <p class="text-blue-400 font-bold text-sm mb-2">${priceText}</p>
                        <div class="flex gap-2">
                            <button onclick="openProductModal('${id}')" class="text-[10px] bg-slate-700 hover:bg-slate-600 px-2 py-1 rounded transition-colors text-white">
                                ${t.view_details_short || "View"}
                            </button>
                            <a href="https://wa.me/213668029536" target="_blank" class="text-[10px] bg-green-600 hover:bg-green-500 px-2 py-1 rounded transition-colors text-white flex items-center gap-1">
                                <i data-lucide="message-circle" class="w-3 h-3"></i> WhatsApp
                            </a>
                        </div>
                    </div>
                    <button onclick="toggleFavorite('${id}')" class="absolute top-2 right-2 text-slate-500 hover:text-pink-500 transition-colors">
                        <i data-lucide="trash-2" class="w-4 h-4"></i>
                    </button>

                    <!-- Admin Quick Edit in Fav List -->
                    <button onclick="quickAdminEdit('${id}')" class="admin-only absolute bottom-2 right-2 text-[10px] bg-blue-600/20 text-blue-500 px-2 py-1 rounded hidden border border-blue-500/10">
                        تعديل
                    </button>
                `;
                container.appendChild(item);
            });
            lucide.createIcons();
            if (typeof checkAdminVisibility === 'function') checkAdminVisibility();
        }

        // Customer Order Image Handling
        let customerFiles = [];
        function handleCustomerFileUpload(event) {
            const files = event.target.files;
            const preview = document.getElementById('customer-previews');

            for (let file of files) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    customerFiles.push(e.target.result);
                    preview.innerHTML += `
                        <div class="relative w-16 h-16 flex-shrink-0 animate-in fade-in zoom-in duration-300">
                            <img src="${e.target.result}" class="w-full h-full object-cover rounded-lg border border-slate-700">
                        </div>
                    `;
                };
                reader.readAsDataURL(file);
            }
        }

        function sendOrderWithImages() {
            if (favorites.length === 0) return alert('قائمة الطلب فارغة!');

            const t = translations[currentLang];
            let message = "مرحباً 34 Phone BBA، أود طلب الهواتف التالية:\n\n";

            favorites.forEach(id => {
                let p = products_db[id];
                if (p) {
                    message += `- ${t[p.titleKey]} (${t[p.priceKey]})\n`;
                } else {
                    const found = cloud_products.find(cp => cp.id === id);
                    if (found) message += `- ${found.name} (${found.price} دج)\n`;
                }
            });

            if (customerFiles.length > 0) {
                message += "\n(قمت بإرفاق صور للوصل أو للتبادل)";
            }

            const waUrl = `https://wa.me/213668029536?text=${encodeURIComponent(message)}`;
            window.open(waUrl, '_blank');
        }

        function quickAdminEdit(id) {
            const targetId = id || currentOpenProductId;
            if (!targetId) return;
            window.location.href = `admin.html?editProduct=${targetId}`;
        }

        // Check Admin Status globally for other lists
        function checkAdminVisibility() {
            const isAdmin = localStorage.getItem('cms_session') !== null;
            document.querySelectorAll('.admin-only').forEach(el => {
                el.classList.toggle('hidden', !isAdmin);
            });
        }

        // Init Favorites UI
        updateFavoritesUI();
        checkAdminVisibility();
    </script>

    <script>
        const translations = {
            en: {
                "title": "34 PHONE BBA - Premium Tech Store",
                "nav_services": "Services",
                "nav_products": "Latest Arrivals",
                "nav_contact": "Contact",
                "nav_favorites": "Order List",
                "favorites_title": "My Order List",
                "favorites_empty": "Your list is empty.",
                "view_details": "View Details",
                "view_details_short": "View",
                "add_to_favorites": "Add to List",
                "remove_from_favorites": "Remove from List",
                "call_now": "Call Now",
                "filter_title": "Filters",
                "search_placeholder": "Search phones...",
                "sort_by": "Sort By",
                "sort_newest": "Newest",
                "sort_price_low": "Price: Low to High",
                "sort_price_high": "Price: High to Low",
                "sort_popular": "Best Selling",
                "sort_rated": "Highest Rated",
                "brand": "Brand",
                "condition": "Condition",
                "storage": "Storage",
                "results_found": "results found",
                "filter_btn": "Filter",
                "search_trigger": "Search phones, filter by brand, color...",
                "search_label": "Search",
                "color_label": "Color",
                "hero_tag": "Premium Tech Store in BBA",
                "stock_low": "Only {n} items left in stock!",
                "out_of_stock": "Currently out of stock",
                "hero_title": "The Best <span class='gradient-text'>Tech</span> in <br> Bordj Bou Arreridj",
                "hero_desc": "Discover the latest smartphones and premium accessories with guaranteed authenticity and exceptional service.",
                "shop_collection": "Shop Collection",
                "visit_store": "Visit Store",
                "google_rating": "5-Star Google Maps Rating",
                "latest_arrivals_title": "Latest <span class='text-blue-500'>Arrivals</span>",
                "products_desc": "Experience the pinnacle of mobile technology.",
                "badge_used": "Used",
                "battery": "Battery",
                "color_pink": "Pink",
                "color_green": "Green",
                "sim_2": "2 SIM",
                "feature_original": "Original Products",
                "feature_exchange": "Easy Exchange",
                "feature_repair": "Expert Repair",
                "feature_fast": "Fast Service",
                "contact_title": "Get in <span class='text-blue-500'>Touch</span>",
                "primary_number": "Primary Number",
                "secondary_number": "Secondary Number",
                "follow_instagram": "Follow on Instagram",
                "footer_rights": "© 2024 34 Phone BBA. All rights reserved.",
                "chat_whatsapp": "Chat with us",
                "price_16": "132,000 DA",
                "iphone_16": "iPhone 16 128GB",
                "price_11": "46,000 DA",
                "iphone_11": "iPhone 11 64GB",
                "price_12": "37,000 DA",
                "iphone_12": "iPhone 12 mini 256GB",
                "iphone_16_pm": "iPhone 16 Pro Max 256GB",
                "price_16_pm": "235,000 DA",
                "color_black": "Black",
                "badge_new_arrival": "Used",
                "iphone_15_pro": "iPhone 15 Pro 128GB",
                "price_15_pro": "82,000 DA",
                "color_white": "White",
                "buy_whatsapp": "Order via WhatsApp",
                "call_confirm": "Call to Order",
                "sold_out": "Sold",
                "sold_out_desc": "This phone has been sold",
                "order_now": "Order Now",
                "first_last_name": "First & Last Name",
                "phone_number": "Phone Number",
                "city": "City",
                "municipality": "Municipality",
                "quantity": "Quantity",
                "delivery_type": "Delivery Type",
                "home_delivery": "Home Delivery",
                "office_delivery": "Office Delivery",
                "office_delivery": "Office Delivery",
                "confirm_order": "Confirm Order",
                "filter_new": "New",
                "filter_used": "Used",
                "ram": "RAM",
                "color_red": "Red",
                "color_blue": "Blue",
                "color_gold": "Gold",
                "color_silver": "Silver",
                "color_gray": "Gray",
                "color_space_gray": "Space Gray",
                "color_midnight": "Midnight",
                "color_starlight": "Starlight",
                "color_purple": "Purple",
                "color_yellow": "Yellow",
                "color_orange": "Orange",
                "color_graphite": "Graphite",
                "color_sierra_blue": "Sierra Blue",
                "color_alpine_green": "Alpine Green",
                "color_deep_purple": "Deep Purple",
                "color_titanium": "Titanium",
                "color_natural_titanium": "Natural Titanium",
                "color_black": "Black",
                "color_white": "White"
            },
            fr: {
                "title": "34 PHONE BBA - Magasin Tech Premium",
                "nav_services": "Services",
                "nav_products": "Nouveautés",
                "nav_contact": "Contact",
                "nav_favorites": "Liste de Commande",
                "favorites_title": "Ma Liste de Commande",
                "favorites_empty": "Votre liste est vide.",
                "view_details": "Voir Détails",
                "view_details_short": "Voir",
                "add_to_favorites": "Ajouter à la Liste",
                "remove_from_favorites": "Retirer de la Liste",
                "call_now": "Appeler",
                "filter_title": "Filtres",
                "search_placeholder": "Rechercher des téléphones...",
                "sort_by": "Trier par",
                "sort_newest": "Plus récents",
                "sort_price_low": "Prix: Croissant",
                "sort_price_high": "Prix: Décroissant",
                "sort_popular": "Meilleures ventes",
                "sort_rated": "Mieux notés",
                "brand": "Marque",
                "condition": "État",
                "storage": "Stockage",
                "results_found": "résultats trouvés",
                "filter_btn": "Filtrer",
                "search_trigger": "Rechercher des téléphones, filtrer par marque, couleur...",
                "search_label": "Recherche",
                "color_label": "Couleur",
                "hero_tag": "Magasin Tech Premium à BBA",
                "stock_low": "Plus que {n} articles en stock !",
                "out_of_stock": "Actuellement en rupture de stock",
                "hero_title": "Le Meilleur de la <span class='gradient-text'>Tech</span> à <br> Bordj Bou Arreridj",
                "hero_desc": "Découvrez les derniers smartphones et accessoires avec authenticité garantie et service exceptionnel.",
                "shop_collection": "Voir la Collection",
                "visit_store": "Visiter le Magasin",
                "google_rating": "Publique 5 Étoiles sur Google",
                "latest_arrivals_title": "<span class='text-blue-500'>Nouveautés</span> Récentes",
                "products_desc": "Découvrez le sommet de la technologie mobile.",
                "badge_used": "Occasion",
                "battery": "Batterie",
                "color_pink": "Rose",
                "color_green": "Vert",
                "sim_2": "2 SIM",
                "feature_original": "Produits Originaux",
                "feature_exchange": "Échange Facile",
                "feature_repair": "Réparation Experte",
                "feature_fast": "Service Rapide",
                "contact_title": "Contactez-<span class='text-blue-500'>Nous</span>",
                "primary_number": "Numéro Principal",
                "secondary_number": "Numéro Secondaire",
                "follow_instagram": "Suivre sur Instagram",
                "footer_rights": "© 2024 34 Phone BBA. Tous droits réservés.",
                "chat_whatsapp": "Discutez avec nous",
                "price_16": "132 000 DA",
                "iphone_16": "iPhone 16 128GB",
                "price_11": "46 000 DA",
                "iphone_11": "iPhone 11 64GB",
                "price_12": "37 000 DA",
                "iphone_12": "iPhone 12 mini 256GB",
                "iphone_16_pm": "iPhone 16 Pro Max 256GB",
                "price_16_pm": "235 000 DA",
                "color_black": "Noir",
                "badge_new_arrival": "Nouvel Arrivage",
                "iphone_15_pro": "iPhone 15 Pro 128GB",
                "price_15_pro": "82 000 DA",
                "color_white": "Blanc",
                "buy_whatsapp": "Commander via WhatsApp",
                "call_confirm": "Appeler pour Commander",
                "sold_out": "Vendu",
                "sold_out_desc": "Ce téléphone est vendu",
                "order_now": "Commander Maintenant",
                "first_last_name": "Nom & Prénom",
                "phone_number": "Numéro de Téléphone",
                "city": "Ville",
                "municipality": "Commune",
                "quantity": "Quantité",
                "delivery_type": "Type de Livraison",
                "home_delivery": "Livraison à Domicile",
                "office_delivery": "Livraison au Bureau",
                "office_delivery": "Livraison au Bureau",
                "confirm_order": "Confirmer la Commande",
                "filter_new": "Neuf",
                "filter_used": "Occasion",
                "ram": "RAM",
                "color_red": "Rouge",
                "color_blue": "Bleu",
                "color_gold": "Or",
                "color_silver": "Argent",
                "color_gray": "Gris",
                "color_space_gray": "Gris Sidéral",
                "color_midnight": "Minuit",
                "color_starlight": "Lumière Stellaire",
                "color_purple": "Violet",
                "color_yellow": "Jaune",
                "color_orange": "Orange",
                "color_graphite": "Graphite",
                "color_sierra_blue": "Bleu Alpin",
                "color_alpine_green": "Vert Alpin",
                "color_deep_purple": "Violet Profond",
                "color_titanium": "Titane",
                "color_natural_titanium": "Titane Naturel",
                "color_black": "Noir",
                "color_white": "Blanc"
            },
            ar: {
                "title": "34 PHONE BBA - متجر التكنولوجيا المتميز",
                "nav_services": "خدماتنا",
                "nav_products": "أحدث المنتجات",
                "nav_contact": "اتصل بنا",
                "nav_favorites": "قائمة الطلب",
                "favorites_title": "قائمة الطلب الخاصة بي",
                "favorites_empty": "قائمة الطلب فارغة.",
                "view_details": "عرض التفاصيل",
                "view_details_short": "عرض",
                "add_to_favorites": "إضافة لقائمة الطلب",
                "remove_from_favorites": "إزالة من القائمة",
                "call_now": "اتصل الآن",
                "filter_title": "الفلاتر",
                "search_placeholder": "ابحث عن الهواتف...",
                "sort_by": "فرز حسب",
                "sort_newest": "الأحدث",
                "sort_price_low": "السعر: من الأقل للأعلى",
                "sort_price_high": "السعر: من الأعلى للأقل",
                "sort_popular": "الأكثر مبيعاً",
                "sort_rated": "الأعلى تقييماً",
                "brand": "العلامة التجارية",
                "condition": "حالة المنتج",
                "storage": "سعة التخزين",
                "results_found": "نتائج موجودة",
                "filter_btn": "تصفية",
                "search_trigger": "ابحث عن الهواتف، صنف حسب الشركة، اللون...",
                "search_label": "البحث",
                "color_label": "اللون",
                "hero_tag": "متجر تكنولوجيا متميز في البرج",
                "stock_low": "بقيت {n} قطع فقط في المخزون!",
                "out_of_stock": "نفذت الكمية حالياً",
                "hero_title": "أفضل <span class='gradient-text'>تكنولوجيا</span> في <br> برج بوعريريج",
                "hero_desc": "اكتشف أحدث الهواتف الذكية والإكسسوارات مع ضمان الأصالة وخدمة استثنائية.",
                "shop_collection": "تصفح المجموعة",
                "visit_store": "زيارة المتجر",
                "google_rating": "تقييم 5 نجوم على جوجل",
                "latest_arrivals_title": "أحدث <span class='text-blue-500'>الوصولات</span>",
                "products_desc": "جرب قمة تكنولوجيا الهواتف المحمولة.",
                "badge_used": "مستعمل",
                "battery": "البطارية",
                "color_pink": "وردي",
                "color_green": "أخضر",
                "sim_2": "شريحتين",
                "feature_original": "منتجات أصلية",
                "feature_exchange": "استبدال سهل",
                "feature_repair": "صيانة احترافية",
                "feature_fast": "خدمة سريعة",
                "contact_title": "تواصل <span class='text-blue-500'>معنا</span>",
                "primary_number": "الرقم الرئيسي",
                "secondary_number": "الرقم الثانوي",
                "follow_instagram": "تابعنا على انستغرام",
                "footer_rights": "© 2024 34 Phone BBA. جميع الحقوق محفوظة.",
                "chat_whatsapp": "تحدث معنا",
                "price_16": "132,000 دج",
                "iphone_16": "ايفون 16 128 جيجا",
                "price_11": "46,000 دج",
                "iphone_11": "ايفون 11 64 جيجا",
                "price_12": "37,000 دج",
                "iphone_12": "ايفون 12 ميني 256 جيجا",
                "iphone_16_pm": "ايفون 16 برو ماكس 256 جيجا",
                "price_16_pm": "235,000 دج",
                "color_black": "أسود",
                "badge_new_arrival": "وصل حديثاً",
                "iphone_15_pro": "ايفون 15 برو 128 جيجا",
                "price_15_pro": "82,000 دج",
                "color_white": "أبيض",
                "buy_whatsapp": "اطلب عبر واتساب",
                "call_confirm": "اتصل للطلب",
                "sold_out": "تم البيع",
                "sold_out_desc": "تم بيع هذا الهاتف",
                "order_now": "اطلب الآن",
                "first_last_name": "الإسم واللقب",
                "phone_number": "رقم الهاتف",
                "city": "المدينة",
                "municipality": "البلدية",
                "quantity": "الكمية",
                "delivery_type": "طريقة التوصيل",
                "home_delivery": "توصيل للمنزل",
                "office_delivery": "توصيل للمكتب",
                "office_delivery": "توصيل للمكتب",
                "confirm_order": "تأكيد الطلب",
                "filter_new": "جديد",
                "filter_used": "مستعمل",
                "ram": "الرام",
                "color_red": "أحمر",
                "color_blue": "أزرق",
                "color_gold": "ذهبي",
                "color_silver": "فضي",
                "color_gray": "رمادي",
                "color_space_gray": "رمادي فلكي",
                "color_midnight": "سماء الليل",
                "color_starlight": "ضوء النجوم",
                "color_purple": "بنفسجي",
                "color_yellow": "أصفر",
                "color_orange": "برتقالي",
                "color_graphite": "غرافيت",
                "color_sierra_blue": "أزرق سييرا",
                "color_alpine_green": "أخضر جبلي",
                "color_deep_purple": "بنفسجي غامق",
                "color_titanium": "تيتانيوم",
                "color_natural_titanium": "تيتانيوم طبيعي",
                "color_black": "أسود",
                "color_white": "أبيض"
            }
        };

        function changeLanguage(lang) {
            localStorage.setItem('lang', lang);
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';

            // Update Body Font
            if (lang === 'ar') {
                document.body.classList.remove('font-sans');
                document.body.classList.add('font-arabic');
            } else {
                document.body.classList.remove('font-arabic');
                document.body.classList.add('font-sans');
            }

            // Update Text Content
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    if (el.tagName === 'INPUT' && el.getAttribute('placeholder')) {
                        el.placeholder = translations[lang][key];
                    } else {
                        el.innerHTML = translations[lang][key];
                    }
                }
            });

            // Update Lang Label
            const label = document.getElementById('current-lang-label');
            if (label) label.textContent = lang.toUpperCase();

            // Additional RTL adjustments for animations or directions if needed
            // could be added here
        }

        // Initialize
        const savedLang = localStorage.getItem('lang') || 'en';
        currentLang = savedLang; // Ensure global var is synced
        changeLanguage(savedLang);
        initFilterSystem();

        // Hook into changeLanguage to update global currentLang
        const originalChangeLanguage = changeLanguage;
        changeLanguage = function (lang) {
            currentLang = lang;
            originalChangeLanguage(lang);
            applyFilters(); // Re-render items in new language
        } 
    </script>
    <!-- Dynamic Articles Section -->
    <section id="articles" class="py-24 relative hidden">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-5xl font-bold mb-4">أحدث <span class="text-blue-500">الأخبار</span></h2>
                <p class="text-slate-400">تابع مقالاتنا وآخر تحديثات المتجر.</p>
            </div>
            <div id="articles-grid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Injected via JS -->
            </div>
        </div>
    </section>

    <!-- Footer with Admin link -->
    <footer class="py-12 border-t border-white/5 bg-slate-900/50">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6">
            <p class="text-slate-500 text-sm" data-i18n="footer_rights">© 2024 34 Phone BBA. All rights reserved.</p>
            <div class="flex gap-6">
                <a href="admin.html" class="text-slate-700 hover:text-slate-500 text-[10px] transition-colors">Admin
                    Access</a>
            </div>
        </div>
    </footer>

    <script>
        // Load Articles from CMS
        function renderCloudArticles() {
            const container = document.getElementById('articles-grid');
            const section = document.getElementById('articles');

            if (cloud_articles.length > 0) {
                section.classList.remove('hidden');
                container.innerHTML = cloud_articles.map(art => `
                    <div class="card-hovering bg-slate-900/40 border border-slate-800 rounded-2xl overflow-hidden">
                        ${art.media && art.media[0] ? `<img src="${art.media[0].url}" class="w-full h-48 object-cover">` : ''}
                        <div class="p-6">
                            <span class="text-xs font-bold text-blue-500 uppercase mb-2 block">${art.category}</span>
                            <h3 class="text-xl font-bold mb-3">${art.title}</h3>
                            <div class="text-slate-400 text-sm line-clamp-3 mb-4">${art.content}</div>
                            <div class="text-xs text-slate-500">${new Date(art.date).toLocaleDateString()}</div>
                        </div>
                    </div>
                `).join('');
            } else {
                section.classList.add('hidden');
            }
        }
    </script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>